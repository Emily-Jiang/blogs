---
layout: post
title: "TITLE"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/ramkumar-k-9286
author_github: https://github.com/ramkumar-k-9286
seo-title: TITLE - makes sure it ends with - OpenLiberty.io
seo-description: DESCRIPTION
blog_description: DESCRIPTION
open-graph-image: https://openliberty.io/img/twitter_card.jpg
open-graph-image-alt: Open Liberty Logo
---
= TITLE
Ramkumar K <https://github.com/ramkumar-k-9286>
:imagesdir: /
:url-prefix:
:url-about: /
//Blank line here is necessary before starting the body of the post.

// // // // // // // //
// In the preceding section:
// Do not insert any blank lines between any of the lines.
// Do not remove or edit the variables on the lines beneath the author name.
//
// "open-graph-image" is set to OL logo. Whenever possible update this to a more appropriate/specific image (For example if present a image that is being used in the post). However, it
// can be left empty which will set it to the default
//
// "open-graph-image-alt" is a description of what is in the image (not a caption). When changing "open-graph-image" to
// a custom picture, you must provide a custom string for "open-graph-image-alt".
//
// Replace TITLE with the blog post title eg: MicroProfile 3.3 is now available on Open Liberty 20.0.0.4
// Replace ramkumar-k-9286 with your GitHub username eg: lauracowen
// Replace DESCRIPTION with a short summary (~60 words) of the release (a more succinct version of the first paragraph of the post).
// Replace Ramkumar K with your name as you'd like it to be displayed, eg: Laura Cowen
//
// Example post: 2020-04-09-microprofile-3-3-open-liberty-20004.adoc
//
// If adding image into the post add :
// -------------------------
// [.img_border_light]
// image::img/blog/FILE_NAME[IMAGE CAPTION ,width=70%,align="center"]
// -------------------------
// "[.img_border_light]" = This adds a faint grey border around the image to make its edges sharper. Use it around screenshots but not           
// around diagrams. Then double check how it looks.
// There is also a "[.img_border_dark]" class which tends to work best with screenshots that are taken on dark
// backgrounds.
// Change "FILE_NAME" to the name of the image file. Also make sure to put the image into the right folder which is: img/blog
// change the "IMAGE CAPTION" to a couple words of what the image is
// // // // // // // //

RELEASE_SUMMARY

// // // // // // // //
// In the preceding section:
// Leave any instances of `tag::xxxx[]` or `end:xxxx[]` as they are.
//
// Replace RELEASE_SUMMARY with a short paragraph that summarises the release. Start with the lead feature but also summarise what else is new in the release. You will agree which will be the lead feature with the reviewers so you can just leave a placeholder here until after the initial review.
// // // // // // // //

// // // // // // // //
// Replace the following throughout the document:
//   Replace 24.0.0.4 with the version number of Open Liberty, eg: 22.0.0.2
//   Replace 24004 with the version number of Open Liberty wihtout the periods, eg: 22002
// // // // // // // //

In link:{url-about}[Open Liberty] 24.0.0.4:

* <<SUB_TAG_0, Support for Java 22 in Open Liberty>>
* <<SUB_TAG_1, 8 guides are updated to use MicroProfile Reactive Messaging 3.0>>
* <<CVEs, Security Vulnerability (CVE) Fixes>>
* <<bugs, Notable bug fixes>>


// // // // // // // //
// If there were updates to guides since last release, keep the following, otherwise remove section.
// // // // // // // //
Along with the new features and functions added to the runtime, weâ€™ve also made <<guides, updates to our guides>>.

// // // // // // // //
// In the preceding section:
// Replace the TAG_X with a short label for the feature in lower-case, eg: mp3
// Replace the FEATURE_1_HEADING with heading the feature section, eg: MicroProfile 3.3
// Where the updates are grouped as sub-headings under a single heading 
//   (eg all the features in a MicroProfile release), provide sub-entries in the list; 
//   eg replace SUB_TAG_1 with mpr, and SUB_FEATURE_1_HEADING with 
//   Easily determine HTTP headers on outgoing requests (MicroProfile Rest Client 1.4)
// // // // // // // //

View the list of fixed bugs in link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A24004+label%3A%22release+bug%22[24.0.0.4].

Check out link:{url-prefix}/blog/?search=release&search!=beta[previous Open Liberty GA release blog posts].


[#run]

// // // // // // // //
// LINKS
//
// OpenLiberty.io site links:
// link:{url-prefix}/guides/maven-intro.html[Maven]
// 
// Off-site links:
//link:https://openapi-generator.tech/docs/installation#jar[Download Instructions]
//
// IMAGES
//
// Place images in ./img/blog/
// Use the syntax:
// image::/img/blog/log4j-rhocp-diagrams/current-problem.png[Logging problem diagram,width=70%,align="center"]
// // // // // // // //

== Develop and run your apps using 24.0.0.4

If you're using link:{url-prefix}/guides/maven-intro.html[Maven], include the following in your `pom.xml` file:

[source,xml]
----
<plugin>
    <groupId>io.openliberty.tools</groupId>
    <artifactId>liberty-maven-plugin</artifactId>
    <version>3.8.2</version>
</plugin>
----

Or for link:{url-prefix}/guides/gradle-intro.html[Gradle], include the following in your `build.gradle` file:

[source,gradle]
----
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'io.openliberty.tools:liberty-gradle-plugin:3.6.2'
    }
}
apply plugin: 'liberty'
----
// // // // // // // //
// In the preceding section:
// Replace the Maven `3.8.2` with the latest version of the plugin: https://search.maven.org/artifact/io.openliberty.tools/liberty-maven-plugin
// Replace the Gradle `3.6.2` with the latest version of the plugin: https://search.maven.org/artifact/io.openliberty.tools/liberty-gradle-plugin
// TODO: Update GHA to automatically do the above.  If the maven.org is problematic, then could fallback to using the GH Releases for the plugins
// // // // // // // //

Or if you're using link:{url-prefix}/docs/latest/container-images.html[container images]:

[source]
----
FROM icr.io/appcafe/open-liberty
----

Or take a look at our link:{url-prefix}/start/[Downloads page].

If you're using link:https://plugins.jetbrains.com/plugin/14856-liberty-tools[IntelliJ IDEA], link:https://marketplace.visualstudio.com/items?itemName=Open-Liberty.liberty-dev-vscode-ext[Visual Studio Code] or link:https://marketplace.eclipse.org/content/liberty-tools[Eclipse IDE], you can also take advantage of our open source link:https://openliberty.io/docs/latest/develop-liberty-tools.html[Liberty developer tools] to enable effective development, testing, debugging and application management all from within your IDE. 

[link=https://stackoverflow.com/tags/open-liberty]
image::img/blog/blog_btn_stack.svg[Ask a question on Stack Overflow, align="center"]

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/28136
// Contact/Reviewer: gjwatts
// // // // // // // // 
[#SUB_TAG_0]
== Support for Java 22 in Open Liberty

2. Which Liberty feature(s) does your update relate to?
    
   Human-readable name (eg WebSockets feature): All
   
   Short feature name (eg websockets-1.0): All

   
   </GHA-BLOG-RELATED-FEATURES>

   <GHA-BLOG-TARGET-PERSONA>
3. Who is the target persona? Who do you expect to use the update? eg application developer, operations.
    Application developers and operations staff
   
   </GHA-BLOG-TARGET-PERSONA>

   <GHA-BLOG-SUMMARY>
4. Provide a summary of the update, including the following points:
   
   - A sentence or two that introduces the update to someone new to the general technology/concept.

   - What was the problem before and how does your update make their life better? (Why should they care?)
   
   - Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet.
   
   - Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology?

Java 22 is the latest release of Java, released in March 2024. It contains new features and enhancements over previous versions of Java. However, Java 22 is not a long-term support (LTS) release and support for it will be dropped when the next version of Java is supported. It offers some new functions and changes that you are going to want to see for yourself.

Check out the link:https://openjdk.org/projects/jdk/22/[changes in Java 22]:
423: link:https://openjdk.org/jeps/423[Region Pinning for G1]
447: link:https://openjdk.org/jeps/447[Statements before super(...) (Preview)]
454: link:https://openjdk.org/jeps/454[Foreign Function & Memory API]
456: link:https://openjdk.org/jeps/456[Unnamed Variables & Patterns]
457: link:https://openjdk.org/jeps/457[Class-File API (Preview)]
458: link:https://openjdk.org/jeps/458[Launch Multi-File Source-Code Programs]
459: link:https://openjdk.org/jeps/459[String Templates (Second Preview)]
460: link:https://openjdk.org/jeps/460[Vector API (Seventh Incubator)]
461: link:https://openjdk.org/jeps/461[Stream Gatherers (Preview)]
462: link:https://openjdk.org/jeps/462[Structured Concurrency (Second Preview)]
463: link:https://openjdk.org/jeps/463[Implicitly Declared Classes and Instance Main Methods (Second Preview)]
464: link:https://openjdk.org/jeps/464[Scoped Values (Second Preview)]

Take advantage of the new changes in Java 22 in Open Liberty now and get more time to review your applications, microservices and runtime environments on your favorite server runtime!

To start using Java 22 with Open Liberty, just link:https://adoptium.net/temurin/releases/?version=22[download the latest release of Java 22], download and install the link:https://openliberty.io/start/#runtime_releases[24.0.0.4] version of Open Liberty, edit your Liberty server's link:https://openliberty.io/docs/latest/reference/config/server-configuration-overview.html#server-env[server.env file] to point JAVA_HOME to your Java 22 installation and start testing today!

For more information on Open Liberty, please visit our link:https://openliberty.io/docs[documentation page].

For more information about Java 22, see the following resources:
- link:https://jdk.java.net/22/release-notes[Release notes]
- link:https://docs.oracle.com/en/java/javase/22/docs/api/index.html[Javadocs]
- link:https://docs.oracle.com/en/java/javase/22/migrate/index.html[Migration guide]
- link:https://adoptium.net/temurin/releases/?version=22[Download page]

   
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/28084
// Contact/Reviewer: gkwan-ibm
// // // // // // // // 
[#SUB_TAG_1]
== 8 guides are updated to use MicroProfile Reactive Messaging 3.0

2. Which Liberty feature(s) does your update relate to?
    
   Human-readable name (eg WebSockets feature):
       - Jakarta EE Platform 10.0
       - MicroProfile 6.1
       - MicroProfile Reactive Messaging 3.0
     
   Short feature name (eg websockets-1.0): 
        - jakartaee-10.0
        - microProfile-6.1
        - mpReactiveMessaging-3.0
   
   </GHA-BLOG-RELATED-FEATURES>

   <GHA-BLOG-TARGET-PERSONA>
3. Who is the target persona? Who do you expect to use the update? eg application developer, operations.
    
   
   </GHA-BLOG-TARGET-PERSONA>
    - application developer
   <GHA-BLOG-SUMMARY>
4. Provide a summary of the update, including the following points:
   
     - The following 8 guides have been updated to use the MicroProfile Reactive Messaging 3.0, MicroProfile 6.1 and Jakarta EE 10 specifications:
       - link:https://openliberty.io/guides/microprofile-reactive-messaging.html[Creating reactive Java microservices]
       - link:https://openliberty.io/guides/microprofile-reactive-messaging-acknowledgment.html[Acknowledging messages using MicroProfile Reactive Messaging]
       - link:https://openliberty.io/guides/microprofile-reactive-messaging-rest-integration.html[Integrating RESTful services with a reactive system]
       - link:https://openliberty.io/guides/microprofile-rest-client-async.html[Consuming RESTful services asynchronously with template interfaces]
       - link:https://openliberty.io/guides/reactive-messaging-sse.html[Streaming updates to a client using Server-Sent Events]
       - link:https://openliberty.io/guides/reactive-rest-client.html[Consuming RESTful services using the reactive JAX-RS client]
       - link:https://openliberty.io/guides/reactive-service-testing.html[Testing reactive Java microservices]
       - link:https://openliberty.io/guides/cloud-openshift-operator.html[Deploying microservices to OpenShift 4 using Kubernetes Operators]
     - The integration tests in those guides have been updated to use Testcontainers. To learn how to test reactive Java microservices in true-to-production environments using Testcontainers, try out the link:https://openliberty.io/guides/reactive-service-testing.html[Testing reactive Java microservices] guide.
   
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 


For more details, check the LINK[LINK_DESCRIPTION].

// // // // // // // //
// In the preceding section:
// Replace TAG_X/SUB_TAG_X with the given tag of your secton from the contents list
// Replace SUB_FEATURE_TITLE/FEATURE_X_TITLE with the given title from the contents list 
// Replace FEATURE with the feature name for the server.xml file e.g. mpHealth-1.4
// Replace LINK with the link for extra information given for the feature
// Replace LINK_DESCRIPTION with a readable description of the information
// // // // // // // //

[#CVEs]
== Security vulnerability (CVE) fixes in this release
[cols="5*"]
|===
|CVE |CVSS Score |Vulnerability Assessment |Versions Affected |Notes

|Link[CVE-XXXX-XXXXX]
|Score
|vulnerability
|Affected versions
|Affected Features and other notes
|===
// // // // // // // //
// In the preceding section:
// If there were any CVEs addressed in this release, fill out the table.  For the information, reference https://github.com/OpenLiberty/docs/blob/draft/modules/ROOT/pages/security-vulnerabilities.adoc.  If it has not been updated for this release, reach out to Kristen Clarke or Michal Broz.
// Note: When linking to features, use the 
// `link:{url-prefix}/docs/latest/reference/feature/someFeature-1.0.html[Some Feature 1.0]` format and 
// NOT what security-vulnerabilities.adoc does (feature:someFeature-1.0[])
//
// If there are no CVEs fixed in this release, replace the table with: 
// "There are no security vulnerability fixes in Open Liberty [24.0.0.4]."
// // // // // // // //
For a list of past security vulnerability fixes, reference the link:{url-prefix}/docs/latest/security-vulnerabilities.html[Security vulnerability (CVE) list].


[#bugs]
== Notable bugs fixed in this release


Weâ€™ve spent some time fixing bugs. The following sections describe just some of the issues resolved in this release. If youâ€™re interested, hereâ€™s the  link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A24004+label%3A%22release+bug%22[full list of bugs fixed in 24.0.0.4].

* link:https://github.com/OpenLiberty/open-liberty/issues/28083[Server Won't Start with Space in File Path]
+
If there is a space in the file path of a server's log directory, there will be an error with the verbose garbage collection option that will keep the server from starting. Trying to start the server via a terminal gives the message `Server defaultServer start failed. Check server logs for details.`
+
Console.log contains:
```
JVMJ9VM007E Command-line option unrecognised: Files\IBM\WebSphere\Liberty\usr\servers\defaultServer\logs\verbosegc.%seq.log,10,1024
```
+
The full file path for the verbosegc option in this case was `C:\\Program Files\IBM\WebSphere\Liberty\usr\servers\defaultServer\logs\verbosegc.%seq.log,10,1024`. The space in `Program Files` causes the option to get split and then causes an error.

* link:https://github.com/OpenLiberty/open-liberty/issues/28044[IBM WebSphere Application Server Liberty is vulnerable to a denial of service due to jose4j (CVE-2023-51775)]
+

* link:https://github.com/OpenLiberty/open-liberty/issues/28012[IBM WebSphere Application Server Liberty is vulnerable to cross-site scripting (CVE-2024-27270)]
+

* link:https://github.com/OpenLiberty/open-liberty/issues/27971[WLP_INSTALL_DIR set incorrectly when wlp/bin is a symbolic link]
+
This is an edge case where the the wlp/**bin** directory is a symbolic link.  In this case, WLP_INSTALL_DIR might resolve to the parent of the **symbolic link** (logical path) rather than the real path (physical path) of the wlp directory.   It works fine if there is a symbolic link somewhere in the ancestry of the bin directory, but fails in some cases when bin is a symbolic link. 
+
The problem is that we first append "/.." to the **bin**  directory, before trying to resolve the path.   At that point, we are now trying to resolve the <ins>parent</ins> of the symbolic link, which normally won't resolve to anything different unless the parent or another ancestor directory is also a symbolic link.

* link:https://github.com/OpenLiberty/open-liberty/issues/27900[NullPointerException may occur for HTTPs requests to WebContainer]
+
If secured request (i.e https:// ) is accepted into the WebContainer but has an exception before the WebContainer can determine a target application to handle this request, the java.lang.NullPointerException can occur. 
+
Same scenario does not have NPE using the un-secure (i.e http) request.

* link:https://github.com/OpenLiberty/open-liberty/issues/27886[NullPointerException can occur in Kernel ClassLoader]
+
NullPointerException is possible in Kernel Classloader
+
java.lang.NullPointerException
	at com.ibm.ws.kernel.internal.classloader.JarFileClassLoader.findClass(JarFileClassLoader.java:165)
	at com.ibm.ws.kernel.internal.classloader.BootstrapChildFirstJarClassloader.loadClass(BootstrapChildFirstJarClassloader.java:92)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:1075)
	at org.eclipse.osgi.internal.loader.SystemBundleLoader.findLocalClass(SystemBundleLoader.java:63)
	at org.eclipse.osgi.internal.loader.sources.SingleSourcePackage.loadClass(SingleSourcePackage.java:41)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass0(BundleLoader.java:479)
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:416)
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:168)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:1075)

* link:https://github.com/OpenLiberty/open-liberty/issues/27833[JAX-rs and RestfulWS monitor bundles' filters are still creating objects when REST is filtered out of monitor-1.0]
+
When using `monitor-1.0` with `jaxrs-*` and the `monitor-1.0`'s filter attribute has filtered out the REST stat module, REST stat objects are still created, but are discarded and will be garbage collected. However, during high loads this can increase the memory consumption as it may take awhile for GC to occur.

* link:https://github.com/OpenLiberty/open-liberty/issues/27779[StackOverFlow in JSP Caused by Recurisve JspContextWrapper#include call ]
+
```
SRVE0777E: Exception thrown by application class 'org.apache.jasper.runtime.PageContextImpl.handlePageException:730'
com.ibm.websphere.servlet.error.ServletErrorReport: java.lang.StackOverflowError
	at org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:730)
        ...
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.lang.Thread.run(Thread.java:825)
Caused by: java.lang.StackOverflowError
	at org.apache.jasper.runtime.JspContextWrapper.include(JspContextWrapper.java:327)
	at org.apache.jasper.runtime.JspContextWrapper.include(JspContextWrapper.java:327)
	at org.apache.jasper.runtime.JspContextWrapper.include(JspContextWrapper.java:327)
```

* link:https://github.com/OpenLiberty/open-liberty/issues/27778[The server start command resolves symbolic links incorrectly on z/OS 3.1]
+

* link:https://github.com/OpenLiberty/open-liberty/issues/27620[Invalid encoded request URI should return 400 instead of 500]
+
500 status code returns for an invalid encoded URI.  It also creates a FFDC log.  It can cause a false alarm for the server administrator.  A `400 Bad Request` should be returned.
+

* link:https://github.com/OpenLiberty/open-liberty/issues/26771[Websocket Out of Memory Leak caused by Expired Sessions]
+
A map within the websocket code is not properly cleaned up during session expiration and may result in a out-of-memory error.  Websocket sessions are fairly small, so it take a long time to notice.  However, depends on the number of websocket connections the server handles. 

* link:https://github.com/OpenLiberty/open-liberty/issues/24925[UUID not working as GeneratedValue Id in some cases]
+

Jakarta Persistence 3.1 added the ability to have a UUID be the id and to also be generated.  In some cases such as the following, where `strategy = GenerationType.UUID` or strategy is omitted (defaulting to AUTO), an IllegalArgumentException is being raised when trying to save an entity for the first time (when it starts out without an id, needing it generated).
+
```
    @GeneratedValue(strategy = GenerationType.UUID)
    @Id
    public UUID id;
```
+
```
java.lang.IllegalArgumentException: Source object is not an instance of java.util.UUID
	at org.eclipse.persistence.mappings.converters.UUIDConverter.convertObjectValueToDataValue(UUIDConverter.java:46)
	at org.eclipse.persistence.mappings.foundation.AbstractDirectMapping.getFieldValue(AbstractDirectMapping.java:790)
	at org.eclipse.persistence.mappings.foundation.AbstractDirectMapping.valueFromObject(AbstractDirectMapping.java:1202)
	at org.eclipse.persistence.internal.descriptors.ObjectBuilder.extractPrimaryKeyFromObject(ObjectBuilder.java:3156)
	at org.eclipse.persistence.internal.sessions.MergeManager.registerObjectForMergeCloneIntoWorkingCopy(MergeManager.java:1062)
	at org.eclipse.persistence.internal.sessions.MergeManager.mergeChangesOfCloneIntoWorkingCopy(MergeManager.java:575)
	at org.eclipse.persistence.internal.sessions.MergeManager.mergeChanges(MergeManager.java:324)
	at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.mergeCloneWithReferences(UnitOfWorkImpl.java:3641)
	at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.mergeCloneWithReferences(RepeatableWriteUnitOfWork.java:402)
	at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.mergeCloneWithReferences(UnitOfWorkImpl.java:3601)
	at org.eclipse.persistence.internal.jpa.EntityManagerImpl.mergeInternal(EntityManagerImpl.java:644)
	at org.eclipse.persistence.internal.jpa.EntityManagerImpl.merge(EntityManagerImpl.java:622)
```


// // // // // // // //
// In the preceding section:
// For this section ask either Michal Broz or Tom Evans or the #openliberty-release-blog channel for Notable bug fixes in this release.
// Present them as a list in the order as provided, linking to the issue and providing a short description of the bug and the resolution.
// If the issue on Github is missing any information, leave a comment in the issue along the lines of:
// "@[issue_owner(s)] please update the description of this `release bug` using the [bug report template](https://github.com/OpenLiberty/open-liberty/issues/new?assignees=&labels=release+bug&template=bug_report.md&title=)" 
// Feel free to message the owner(s) directly as well, especially if no action has been taken by them.
// For inspiration about how to write this section look at previous blogs e.g- 20.0.0.10 or 21.0.0.12 (https://openliberty.io/blog/2021/11/26/jakarta-ee-9.1.html#bugs)
// // // // // // // //


// // // // // // // //
// If there were updates to guides since last release, keep the following, otherwise remove section.
// Check with Gilbert Kwan, otherwise Michal Broz or YK Chang
// // // // // // // //
[#guides]
== New and updated guides since the previous release
As Open Liberty features and functionality continue to grow, we continue to add link:https://openliberty.io/guides/?search=new&key=tag[new guides to openliberty.io] on those topics to make their adoption as easy as possible.  Existing guides also receive updates to address any reported bugs/issues, keep their content current, and expand what their topic covers.

// // // // // // // //
// In the following section, list any new guides, or changes/updates to existing guides.  
// The following is an example of how the list can be structured (similar to the bugs section):
// * link:{url-prefix}/guides/[new/updated guide].html[Guide Title]
//  ** Description of the guide or the changes made to the guide.
// // // // // // // //


== Get Open Liberty 24.0.0.4 now

Available through <<run,Maven, Gradle, Docker, and as a downloadable archive>>.
