---
layout: post
title: "TITLE"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/dmuelle
author_github: https://github.com/dmuelle
seo-title: TITLE - makes sure it ends with - OpenLiberty.io
seo-description: DESCRIPTION
blog_description: DESCRIPTION
open-graph-image: https://openliberty.io/img/twitter_card.jpg
open-graph-image-alt: Open Liberty Logo
---
= TITLE
David Mueller <https://github.com/dmuelle>
:imagesdir: /
:url-prefix:
:url-about: /
//Blank line here is necessary before starting the body of the post.

// // // // // // // //
// In the preceding section:
// Do not insert any blank lines between any of the lines.
// Do not remove or edit the variables on the lines beneath the author name.
//
// "open-graph-image" is set to OL logo. Whenever possible update this to a more appropriate/specific image (For example if present an image that is being used in the post). However, it
// can be left empty which will set it to the default
//
// "open-graph-image-alt" is a description of what is in the image (not a caption). When changing "open-graph-image" to
// a custom picture, you must provide a custom string for "open-graph-image-alt".
//
// Replace TITLE with the blog post title eg: MicroProfile 3.3 is now available on Open Liberty 20.0.0.4
// Replace dmuelle with your GitHub username eg: lauracowen
// Replace DESCRIPTION with a short summary (~60 words) of the release (a more succinct version of the first paragraph of the post).
// Replace David Mueller with your name as you'd like it to be displayed,
// eg: LauraCowen
//
// For every link starting with "https://openliberty.io" in the post make sure to use
// {url-prefix}. e.g- link:{url-prefix}/guides/GUIDENAME[GUIDENAME]:
//
// If adding image into the post add :
// -------------------------
// [.img_border_light]
// image::img/blog/FILE_NAME[IMAGE CAPTION ,width=70%,align="center"]
// -------------------------
// "[.img_border_light]" = This adds a faint grey border around the image to make its edges sharper. Use it around screenshots but not
// around diagrams. Then double check how it looks.
// There is also a "[.img_border_dark]" class which tends to work best with screenshots that are taken on dark backgrounds.
// Change "FILE_NAME" to the name of the image file. Also make sure to put the image into the right folder which is: img/blog
// change the "IMAGE CAPTION" to a couple words of what the image is
// // // // // // // //

BETA_RELEASE_SUMMARY

// // // // // // // //
// Change the RELEASE_SUMMARY to an introductory paragraph. This sentence is really
// important because it is supposed to grab the readers attention.  Make sure to keep the blank lines
//
// Throughout the doc, replace 24.0.0.8-beta with the version number of Open Liberty, eg: 22.0.0.2-beta
// // // // // // // //

The link:{url-about}[Open Liberty] 24.0.0.8-beta includes the following beta features (along with link:{url-prefix}/docs/latest/reference/feature/feature-overview.html[all GA features]):

* <<SUB_TAG_0, Fault Tolerance 4.1>>
* <<SUB_TAG_1, MP Rest Client 4.0>>
* <<SUB_TAG_2, HTTP Metrics with MP Telemetry 2.0>>
* <<SUB_TAG_3, MicroProfile Telemetry 2.0>>
* <<SUB_TAG_4, Partition Cookies>>
* <<SUB_TAG_5, Preview of container feature for external Jakarta Data providers>>
* <<SUB_TAG_6, Jakarta EE11 facesContainer-4.1>>
* <<SUB_TAG_7, Jakarta EE11 WebSocket 2.2>>
* <<SUB_TAG_8, Versionless Jakarta EE/MicroProfile features>>

// // // // // // // //
// In the preceding section:
// Change SUB_FEATURE_TITLE to the feature that is included in this release and
// change the SUB_TAG_1/2/3 to the heading tags
//
// However if there's only 1 new feature, delete the previous section and change it to the following sentence:
// "The link:{url-about}[Open Liberty] 24.0.0.8-beta includes SUB_FEATURE_TITLE"
// // // // // // // //

See also link:{url-prefix}/blog/?search=beta&key=tag[previous Open Liberty beta blog posts].

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/29122
// Contact/Reviewer: benjamin-confino
// // // // // // // // 
[#SUB_TAG_0]
== Fault Tolerance 4.1


MicroProfile Fault Tolerance allows users to easily apply strategies for mitigating failures in their code. It provides annotations which you can add to methods to use bulkhead, circuit breaker, retry, timeout and fallback strategies.

The new `mpFaultTolerance-4.1` feature provides integration with `mpTelemetry-2.0` allowing Fault Tolerance to export metric data to Open Telemetry. With this change, and other changes in `mpTelemetry-2.0` you can now use Open Telemetry as one single source for logging, metrics, and tracing, making it easier to manage and configure your application's observability. 

To enable this functionality simply enable `mpFaultTolerance-4.1` and `mpTelemetry-2.0` in your server.xml then configure `mpTelemetry-2.0` to export metrics. Here is a minimal configuration that will configure Open Telemetry to export to your messages.log file and a class which will generate Fault Tolerance metrics (it must be accessed as a CDI bean).

**server.xml**
```
<featureManager>
  <feature>mpFaultTolerance-4.1</feature>
  <feature>mpTelemetry-2.0</feature>
</featureManager>
```

**bootstrap.properties**
This will configure Open Telemetry to only output metrics, you will find them in messages.log
```
otel.sdk.disabled=false
otel.metrics.exporter=logging
otel.logs.exporter=none
otel.traces.exporter=none
TODO; set the timeout to a low number so people will see the metrics quickly. Then mention why you did so in the paragraph apart
```
**Example class**
Ensure this class is injected as a CDI bean and invoked by the user in whatever way you prefer.
```
import org.eclipse.microprofile.faulttolerance.Retry;
import jakarta.enterprise.context.ApplicationScoped;

@ApplicationScoped
public class Example Class {

    @Retry
    public int exampleMethod(String name) {
        return 1;
    }
}
````
**Further resources:**

- You can read more detail about the changes in the new version in the link:https://download.eclipse.org/microprofile/microprofile-fault-tolerance-4.1-RC2/microprofile-fault-tolerance-spec-4.1-RC2.html and [API Javadoc](https://download.eclipse.org/microprofile/microprofile-fault-tolerance-4.1-RC2/apidocs/[specification].
- You can learn more about how to use MicroProfile OpenAPI from our link:https://openliberty.io/docs/latest/fault-tolerance.html[documentation] and link:https://openliberty.io/guides/#fault_tolerance[guide].
    
    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/29110
// Contact/Reviewer: WhiteCat22
// // // // // // // // 
[#SUB_TAG_1]
== MP Rest Client 4.0

Please provide a summary of the update, including the following points:
   
   - A sentence or two that introduces the update to someone new to the general technology/concept.
      - The MicroProfile Rest Client provides a type-safe approach to invoke RESTful services over HTTP. As much as possible the MP Rest Client attempts to use link:https://jakarta.ee/specifications/restful-ws/3.1/[Jakarta RESTful Web Services 3.1] APIs for consistency and easier re-use.
   - The Human-readable name and short feature name for your feature- eg WebSockets feature (websockets-1.0).
      - Human-readable name: `MicroProfile Rest Client 4.0`
      - Short feature name: `mpRestClient-4.0`
   - Who is the target persona? Who do you expect to use the update? eg application developer, operations.
      -  **Application Developers**
   - What was the problem before and how does your update make their life better? (Why should they care?)
      - MicroProfile Rest Client 4.0 aims to align the MP Rest Client with Jakarta RESTful Web Services 3.1 as part of the greater effort to align MicroProfile 7.0 with Jakarta EE10.
         - Added a new `RestClientBuilder.header(String, Object)` method to add dynamic headers to the request.
         - Added a new `RestClientBuilder.baseUri(String)` overload method so user's don't have to call `URI.create(String)`.
         - Added clarification in the spec on how to use Jakarta RESTful Web Services `EntityPart` API for multipart requests.
   - Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet. 
      - Configure your `server.xml` with the `mpRestClient-4.0` feature.
```
    <featureManager>
        <feature>mpRestClient-4.0</feature>
    </featureManager>
```
   - Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology?  

      - The GitHub page (which includes links to the Maven coordinates, docs, release page, etc.) is at: https://github.com/eclipse/microprofile-rest-client
      - The specification document is available at: https://download.eclipse.org/microprofile/microprofile-rest-client-4.0-RC2/microprofile-rest-client-spec-4.0-RC2.html (note that this is a release candidate link, the final release link should contain the same content but will have a different URL)
      - The API Javadoc is available at: http://download.eclipse.org/microprofile/microprofile-rest-client-4.0-RC2/apidocs/ (also release candidate link)
    
    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/29050
// Contact/Reviewer: Channyboy
// // // // // // // // 
[#SUB_TAG_2]
== HTTP Metrics with MP Telemetry 2.0

Please provide a summary of the update, including the following points:
   
   - A sentence or two that introduces the update to someone new to the general technology/concept.
   > From the previous beta (24.0.0.7-beta), we've introduced "Enhanced HTTP Request Monitoring with Monitor 1.0". This introduced the capability to track HTTP requests made to the server and record the request method, response status, duration, HTTP route, and other attributes that align with the Open Telemetry HTTP metric semantic convention. This information was recorded into an `HttpStatsMXBean` and if MicroProfile Metrics v5 runtime was active (`mpMetrics-5.x`) then the HTTP metrics would be reported by the MicroProfile Metrics on the `/metrics` endpoint. Now in this beta release, we will be able to support registering HTTP Metrics with the MicroProfile Telemetry v2 runtime (`mpTelemetry-2.0`). This metric data can then be exported to a compatible OTLP metrics consumer. This enhancement is an auto-feature that activates with `mpTelemetry-2.0` `monitor-1.0` and any feature that uses the servlet engine currently supporting Jakarta EE 10 features like `servlet-6.0`, `pages-3.1`, and `restfulWS-3.1`. 

   - The Human-readable name and short feature name for your feature- eg WebSockets feature (websockets-1.0).
   > N/A -> auto feature that will start with `monitor-1.0` and any feature using the servlet engine + `mpTelemetry-2.0`. Currently only supports JEE 10 features.
   - Who is the target persona? Who do you expect to use the update? eg application developer, operations. 
   > Operations to track http requests made to the server, duration and response type. (Specifically if they use with mpTelemetry-2.0)
   - What was the problem before and how does your update make their life better? (Why should they care?)
   > Open Liberty can currently track servlet requests and JAX-RS/RESTful resource requests to the server as their own respective MBeans (i.e., servlet MBeans and REST Mbeans). Now introduced in the previous 24.0.0.7-beta, HTTP requests to the server can be tracked in their own MBeans and that data used to create metrics with `mpMetrics-5.x`. Now the creation and reporting of HTTP metrics is supported for `mpTelemetry-2.0`. Users can then export the metric data to an OTLP compatible metric consumer.
   - Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet. 
   > Auto-feature that will start with `monitor-1.0` and any feature that uses the servlet engine. Currently only supports JEE 10 features. For example: `servlet-6.0`, `pages-3.1`, `restfulWS-3.1`. Currently supports registering of HTTP metrics with `mpMetrics-5.x` features (from previous beta). Now can support creating metrics with `mpTelemetry-2.0`
   - Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology?  
  >  link:https://opentelemetry.io/docs/specs/semconv/http/http-metrics/#metric-httpserverrequestduration[Open Telemetry HTTP semantic convention]
    
    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/29019
// Contact/Reviewer: yasmin-aumeeruddy
// // // // // // // // 
[#SUB_TAG_3]
== MicroProfile Telemetry 2.0

    
MicroProfile Telemetry 2.0 provides developers with the latest Open Telemetry technology; the feature now consumes OpenTelemetry-1.34.0. In addition to distributed tracing, the feature now allows OpenTelemetry to collect and export metrics and logs.

#### HTTP Metrics

From the previous beta (24.0.0.7-beta), we've introduced "Enhanced HTTP Request Monitoring with Monitor 1.0". This introduced the capability to track HTTP requests made to the server and record the
-  Request method
- Response status
- Duration
- HTTP route
- Other attributes that align with the link:https://opentelemetry.io/docs/specs/semconv/general/metrics/[ Open Telemetry HTTP metric semantic conventions. ]

This information was recorded into an `HttpStatsMXBean` and if MicroProfile Metrics v5 runtime was active (`mpMetrics-5.x`) then the HTTP metrics would be reported by the MicroProfile Metrics on the `/metrics` REST endpoint. Now in this beta release with MicroProfile Telemetry 2.0 available, we will be able to support registering HTTP Metrics with `mpTelemetry-2.0` feature. This metric data can then be exported to a compatible OTLP metrics consumer. This enhancement is an auto-feature that activates with `mpTelemetry-2.0`, `monitor-1.0` and any feature that uses the servlet engine currently supporting Jakarta EE 10 features like `servlet-6.0`, `pages-3.1`, and `restfulWS-3.1`.

#### Logs 

Logs generated via java.util.logging (JUL) and message logs can now be collected with OpenTelemetry with the MpTelemetry 2.0 feature. 

To enable the MicroProfile Telemetry 2.0 feature to collect metrics, logs and traces, add the following configuration to your server.xml:

```
<features>
   <feature>mpTelemetry-2.0</feature>
</features>
```

Additionally, you must make third-party APIs visible for your application in the server.xml:

```
<webApplication location="application-name.war" contextRoot="/">
    <!-- enable visibility to third party apis -->
    <classloader apiTypeVisibility="+third-party"/>
</webApplication>
```

To collect and export runtime-level logs and metrics, enable OpenTelemetry using system properties or environment variables: 

`otel.sdk.disabled=false` / `OTEL_SDK_DISABLED=false`

If you would like to separately configure multiple applications in a server, you can configure OpenTelemetry with application configuration. Note that you will not collect runtime-level logs and metrics this way. 

By default, all OpenTelemetry data is exported to link:https://opentelemetry.io/docs/languages/java/exporters/#otlp[OTLP]. You can change each exporter with the following properties:

`otel.metrics.exporter`/`OTEL_METRICS_EXPORTER`
`otel.logs.exporter`/`OTEL_LOGS_EXPORTER`
`otel.traces.exporter`/`OTEL_TRACES_EXPORTER`

### Known Issues 
 
Tracing context is not transferred through threads in REST Client async requests. Consequently, context values will be inconsistent with parent and child spans.


    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/28921
// Contact/Reviewer: volosied,pnicolucci
// // // // // // // // 
[#SUB_TAG_4]
== Partition Cookies

Please provide a summary of the update, including the following points:
   
   - A sentence or two that introduces the update to someone new to the general technology/concept.
   

>    Chrome announced they will phase out third-party (i.e. cross-site) cookies support for improved privacy. However, as some sites were designed with third party cookies in mind, they will be broken by this change. Therefore, Chrome has announced a new cookie attribute "Partitioned" as a workaround for third-party cookies with limitations. 

    
   - The Human-readable name and short feature name for your feature- eg WebSockets feature (websockets-1.0).
   
   > Adding the Partitioned cookie attribute.
   
   - Who is the target persona? Who do you expect to use the update? eg application developer, operations. 
   
   > application developers, application server administrators

   - What was the problem before and how does your update make their life better? (Why should they care?)
   

>  First some background information regarding third-party (i.e. cross-site) cookies.
> 
> Currently, if a top-level site X has a another site embedded Z (such as an iframe), then any cookies set by the embedded site Z could be shared with any other site which embeds site Z, such as top-level site Y. This is due to cookies placed in a cookie jar under the Z site key.  This is assuming the cookie is labeled as SameSite=None since it would not be shared when set to Lax or Strict. Another example with visuals can be found here (1).

<img width="657" alt="image" src="https://github.com/OpenLiberty/open-liberty/assets/5934310/c82299d7-bf3d-4d11-93d2-cfa511755ad0">

> To increase privacy and reduce tracking,  Chrome announced (2) it would phase out third-party cookies in 2025 (initially Q3 2024, but it was pushed back due to regulatory delays). Developers should see if their sites are affected, and Chrome provided documentation (3) for testing.  If one is affected, there are handful of options provided to mitigate this change. One such option is called CHIPS -- Cookies Having Independent Partitioned State. 
> 
> This new "Partitioned" attribute divides the cookie jar, as the name indicates. Instead of saving the cookies within Z site key, they will also be keyed under the top-level site, such as X and Y.  In this way,  if X embeds Z and Y embeds Z, the Z's cookies will not be shared between X and Y. 
> 
<img width="654" alt="image" src="https://github.com/OpenLiberty/open-liberty/assets/5934310/a32e7f80-11aa-4ab0-a696-b94bf521e544">

> The way to specify  if a cookie should be partitioned is through the new attribute. Please note that if the SameSite=None attribute is missing from the cookie, it would be blocked by Chrome and any Chromium-based browsers because it will be treated as Lax.    

   
   - Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet.  
   

> The partitioned attribute configuration is opt-in and  behaves much like the SameSite configuration.  The samesite channel config applies to all cookies, while the `httpSession` and `webAppSecurity` config applies to their respective cookies.   It's important to note that  the the `httpSession` and `webAppSecurity` config take precedence over the channel config. The default values for these two are `defer` which means they will defer to the channel config.  As for channel config, it's default value is `false` meaning "Partitioned" is not added. 

  
Setting the Partitioned attribute for the session cookie

`<httpSession cookieSameSite="None" cookiePartitioned="defer|true|false"/>`

Setting the Partitioned attribute for the LTPA/JWT security cookies

`<webAppSecurity sameSiteCookie="None" partitionedCookie="defer|true|false"/>`

Setting the Partitioned attribute for other cookies

```
<httpEndpoint id="defaultHttpEndpoint"
              httpPort="9080"
              httpsPort="9443" >
   <samesite none="*" partitioned="true|false"/>
</httpEndpoint>
```
   

>    Other ways to set `Partitioned` include using the `Set-Cookie` header via the following two `HttpServletResponse` APIs: 
>    - link:https://openliberty.io/docs/ref/javaee/8/#package=javax/servlet/http/package-frame.html&class=javax/servlet/http/HttpServletResponse.html#setHeader-java.lang.String-java.lang.String-[HttpServletResponse.setHeader]
> 
>    -  link:https://openliberty.io/docs/ref/javaee/8/#package=javax/servlet/http/package-frame.html&class=javax/servlet/http/HttpServletResponse.html#addHeader-java.lang.String-java.lang.String-[HttpServletResponse.addHeader]

   
   
   - Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology?  
   
> 1) https://github.com/privacycg/CHIPS
>
> 2) https://developers.google.com/privacy-sandbox/3pcd/
> 
> 3) https://developers.google.com/privacy-sandbox/3pcd/prepare/test-for-breakage  
    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/28869
// Contact/Reviewer: KyleAure,njr-11
// // // // // // // // 
[#SUB_TAG_5]
== Preview of container feature for external Jakarta Data providers

Please provide a summary of the update, including the following points:
   
- A sentence or two that introduces the update to someone new to the general technology/concept.
  - Jakarta Data 1.0 is a new Jakarta EE specification that standardizes a repository based programming model for data access across relational and non-relational databases.
- The Human-readable name and short feature name for your feature- eg WebSockets feature (websockets-1.0).
  - Jakarta Data API (dataContainer-1.0)
- Who is the target persona? Who do you expect to use the update? eg application developer, operations. 
  - Application developer    
- What was the problem before and how does your update make their life better? (Why should they care?)
  - This feature enables third-party Jakarta Data providers to be used in Open Liberty without including the built-in provider for EclipseLink. This is useful if you want to use a different Jakarta Persistence-based Jakarta Data provider such as Hibernate without colliding on the Jakarta Persistence Entity annotation or if you want to use Jakarta NoSQL exclusively and do not want the overhead of the built-in provider for relational databases.
- Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet.

  The dataContainer-1.0 feature will provide the Jakarta Data API to applications deployed to Open Liberty.

  To use a thrid-party Jakarta Data provider include the `dataContainer-1.0` feature. The thrid-party Jakarta Data provider can then be included in your server configuration using the `library` element.

  The following is an example `server.xml` configuration using the Eclipse jNoSQL Jakarta Data provider and a MongoDB database:

  ```xml
  <featureManager>
    <feature>dataContainer-1.0</feature>

    <!-- Features needed for jNoSQL config / processing -->
    <feature>mpConfig-3.1</feature>
    <feature>jsonb-3.0</feature>
  </featureManager>

  <library id="jnosql">
  	<!-- Jakarta NoSQL API -->
  	<fileset dir="${shared.resource.dir}/nosql" includes="jakarta.nosql-api.jar" />
  	<!-- Eclipse jNoSQL Implementation of Jakarta NoSQL and Jakarta Data -->
    <fileset dir="${shared.resource.dir}/jnosql"
    	includes="jnosql-communication-core.jar jnosql-mapping-core.jar jnosql-mongodb.jar *.jar" />
    <!-- Mongo java driver -->
    <fileset dir="${shared.resource.dir}/mongodb"
    	includes="mongodb-driver-core.jar mongodb-driver-sync.jar" />
  </library>

  <!-- MongoDB connection configuration -->
  <variable name="jnosql.mongodb.host" value="${MONGO_HOST}"/>
  <variable name="jnosql.document.database" value="${MONGO_DBNAME}"/>

  <application location="MyApplication.war">
    <classloader commonLibraryRef="jnosql" />
  </application>
  ```

  To use a third-party Jakarta Persistence-based Jakarta Data provider include the `dataContainer-1.0` and `persistenceContainer-3.2` features. The third-party Jakarta Data provider can then be included in your server configuration using a `library` element.

  The following is an example `server.xml` configuration using the Hibernate ORM Jakarta Data provider and a PostgreSQL database:

  ```xml
  <featureManager>
    <feature>dataContainer-1.0</feature>
    <feature>persistenceContainer-3.2</feature>
    
    <!-- Features needed for Hibernate config / processing -->
    <feature>xmlBinding-4.0</feature>
  </featureManager>

  <!-- Hibernate Implementation of Jakarta Persistence and Jakarta Data -->
  <library id="hibernate">
      <fileset dir="${shared.resource.dir}/hibernate"
        includes="hibernate-core.jar hibernate-models.jar *.jar"/>
  </library>

  <!-- PostgreSQL JDBC driver -->
  <library id="postgresql">
      <fileset dir="${shared.resource.dir}/postgresql" includes="*.jar"/>
  </library>

  <!-- Datasource used to create a Persistence Unit -->
  <dataSource jndiName="jdbc/postgresql" >
    <jdbcDriver libraryRef="postgresql"/>
    <properties.postgresql URL="${POSTGRESQL_URL}"/>
  </dataSource>

  <application location="MyApplication.war">
    <classloader commonLibraryRef="hibernate, postgresql" />
  </application>

  ```

  Hibernate ORM uses a persistence unit to persist entities defined on a Jakarta Data `repository` interface.  To create a persistence unit add a `META-INF/persistence.xml` deployment descriptor to your application.

  ```xml
  <persistence xmlns="https://jakarta.ee/xml/ns/persistence"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_2.xsd"
         version="3.2">

  <persistence-unit name="postgresql-pu">
	<provider>org.hibernate.jpa.HibernatePersistenceProvider</provider>
    <jta-data-source>jdbc/postgresql</jta-data-source>
    <properties>
      <property name="jakarta.persistence.schema-generation.database.action" value="create"/>
    </properties>
  </persistence-unit>

  </persistence>
  ```

- Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology?  
  - Jakarta Data spec: https://jakarta.ee/specifications/data/1.0/jakarta-data-1.0
  - Jakarta Data javadoc: https://jakarta.ee/specifications/data/1.0/apidocs/jakarta.data/module-summary.html
  - Open Liberty blog: https://openliberty.io/blog/2024/06/04/24.0.0.6-beta.html#data
  - Hibernate support: https://docs.jboss.org/hibernate/orm/7.0/repositories/html_single/Hibernate_Data_Repositories.html
  - Eclipse jNoSQL support: https://github.com/jakartaee/nosql
    
    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/28770
// Contact/Reviewer: volosied,pnicolucci
// // // // // // // // 
[#SUB_TAG_6]
== Jakarta EE11 facesContainer-4.1

Please provide a summary of the update, including the following points:
   
   - A sentence or two that introduces the update to someone new to the general technology/concept.

> Faces Container is a liberty feature which allows application developers to bring their own Jakarta Faces API and Implementation to Liberty.  The alternative is to use the Liberty provided faces-4.1 feature which provides the MyFaces 4.1 API and Implementation. 

> As for Jakarta Faces, it is a Model-View-Controller (MVC) framework for building web applications. It offers many convenient features, such as state management and input validation.

   - The Human-readable name and short feature name for your feature- eg WebSockets feature (websockets-1.0).

>    Jakarta Faces Container 4.1 (facesContainer-4.1)

   - Who is the target persona? Who do you expect to use the update? eg application developer, operations. 

>    These features are for application developers.

   - What was the problem before and how does your update make their life better? (Why should they care?)

>    The Faces Container feature was updated to support the 4.1 API and Implementation jars.  If the 4.1 jars were used with earlier features, errors would occur since the feature checks against the specification version listed within the jars. 

 
   - Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet.  
   

>        <featureManager>
>         <feature>facesContainer-4.1</feature>
>       </featureManager>


   - Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology?  

> 
The Liberty docs on faces container can be found link:https://openliberty.io/docs/latest/reference/feature/facesContainer-4.0.html[here].
As for Faces 4.1, the Beta Blog announcement can be found link:https://openliberty.io/blog/2024/07/02/24.0.0.7-beta.html#faces41[here]. The Faces 4.1 JavaDocs and Specifications can be found link:https://jakarta.ee/specifications/faces/4.1/[here].  

    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/28769
// Contact/Reviewer: volosied,pnicolucci
// // // // // // // // 
[#SUB_TAG_7]
== Jakarta EE11 WebSocket 2.2

Please provide a summary of the update, including the following points:
   
   - A sentence or two that introduces the update to someone new to the general technology/concept.
   > The websocket-2.2 feature allows communication for endpoints via the Websocket protocol. It is an implementation of the Jakarta EE 11 Websocket 2.2 Specification.
   
   - The Human-readable name and short feature name for your feature- eg WebSockets feature (websockets-1.0).
   > Jakarta WebSocket 2.2 (websocket-2.2)

   - Who is the target persona? Who do you expect to use the update? eg application developer, operations. 
   > This feature is for Jakarta Enterprise Edition (EE) application developers.

   - What was the problem before and how does your update make their life better? (Why should they care?)

   >  Although very few spec changes were listed for the 2.2 release, the main change from 2.1 is the introduction of the link:https://jakarta.ee/specifications/websocket/2.2/apidocs/server/jakarta/websocket/sendresult#getSession([getSession]) method on the SendResult class.  This  allows one to retrieve the original session used in the asynchronous remote call.  Use cases can include broadcasting messages to numerous listening clients.
   >
   >  The next beta release of websocket-2.2 will limit the link:https://jakarta.ee/specifications/websocket/2.2/apidocs/server/jakarta/websocket/onmessage#maxMessageSize([MaxMessageSize]) to Integer#MAX_VALUE for the OnMessage annotation to avoid type errors. 

   
   - Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet.  
      
```
      <featureManager>
           <feature>websocket-2.2</feature>
      </featureManager>
```
   - Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology?  
   > More information such as the JavaDocs, specification documents, and other details can be found at https://jakarta.ee/specifications/websocket/2.2/
    
    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/28656
// Contact/Reviewer: hlhoots
// // // // // // // // 
[#SUB_TAG_8]
== Versionless Jakarta EE/MicroProfile features

Please provide a summary of the update, including the following points:
   
   - A sentence or two that introduces the update to someone new to the general technology/concept.
   
Versionless features are a generic way to specify Open Liberty features in the server.xml without having to specify a feature version.  These new features are available for the MicroProfile, JakarataEE and JavaEE platforms.  A matching versioned platform element must be specified when using versionless features.  For example, instead of specifying <feature>servlet-6.1</feature> in your server.xml, specify <feature>servlet</feature>.

   - The Human-readable name and short feature name for your feature- eg WebSockets feature (websockets-1.0).
   
kernel

(Note: Many existing features are impacted by the addition of versionless features.  For example, "servlet-4.0", and other servlet feature versions, have a new "servlet" feature added.  A full list of the new versionless features can be provided.

   - Who is the target persona? Who do you expect to use the update? eg application developer, operations. 
  
Developers or anyone responsible for configuring features in the server.xml.

   - What was the problem before and how does your update make their life better? (Why should they care?)

 Determining the correct version typically requires that the developer experiment, plugging in different versions of features until they find one that works, or requires that they dig deep into feature documentation.  Either way, it’s not an ideal experience, and Versionless Features are here to make life easier.

   - Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet.  
  
For example, below is a sample configuration in the server.xml of using versionless features with MicroProfile-5.0 specified as the platform element.  Up to 2 platform elements may be specified, one for MicroProfile, another for JakartaEE/JavaEE.  

    <!-- Enable features -->
    <featureManager>
        <platform>microProfile-5.0</platform>
        <feature>mpHealth</feature>
        <feature>mpMetrics</feature>
    </featureManager>

Another example is specifying a JavaEE platform of javaee-8.0 with associated versionless features defined for servlet, jpa, and jaxrs.

    <!-- Enable features -->
    <featureManager>
        <platform>javaee-8.0</platform>
        <feature>servlet</feature>
        <feature>jpa</feature>
        <feature>jaxrs</feature>
    </featureManager>

   - Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology? 
   
Open Liberty docs, and a stand-alone BLOG.  See issue #28660.

   - Known limitations
     - Error handling scenarios will return generic messages.
     - Installation scenarios via command line tools (including maven and gradle plugins) are not enabled.

**Replace this with a link to the standard blog issue.**
    
    
// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 



To enable the new beta features in your app, add them to your `server.xml`:

[source, xml]
----

----

[#run]
=== Try it now

To try out these features, update your build tools to pull the Open Liberty All Beta Features package instead of the main release. The beta works with Java SE 21, Java SE 17, Java SE 11, and Java SE 8.
// // // // // // // //
// In the preceding section:
// Check if a new non-LTS Java SE version is supported that needs to be added to the list (21, 17, 11, and 8 are LTS and will remain for a while)
// https://openliberty.io/docs/latest/java-se.html
//
// In the following section:
// Check if a new MicroProfile or Jakarta version is in beta that could replace the example values in the codeblock
// // // // // // // //

If you're using link:{url-prefix}/guides/maven-intro.html[Maven], you can install the All Beta Features package using:

[source,xml]
----
<plugin>
    <groupId>io.openliberty.tools</groupId>
    <artifactId>liberty-maven-plugin</artifactId>
    <version>3.8.2</version>
    <configuration>
        <runtimeArtifact>
          <groupId>io.openliberty.beta</groupId>
          <artifactId>openliberty-runtime</artifactId>
          <version>24.0.0.8-beta</version>
          <type>zip</type>
        </runtimeArtifact>
    </configuration>
</plugin>
----

You must also add dependencies to your pom.xml file for the beta version of the APIs that are associated with the beta features that you want to try. For example, the following block adds dependencies for two example beta APIs:

[source,xml]
----
<dependency>
    <groupId>org.example.spec</groupId>
    <artifactId>exampleApi</artifactId>
    <version>7.0</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>example.platform</groupId>
    <artifactId>example.example-api</artifactId>
    <version>11.0.0</version>
    <scope>provided</scope>
</dependency>
----

Or for link:{url-prefix}/guides/gradle-intro.html[Gradle]:

[source,gradle]
----
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'io.openliberty.tools:liberty-gradle-plugin:3.6.2'
    }
}
apply plugin: 'liberty'
dependencies {
    libertyRuntime group: 'io.openliberty.beta', name: 'openliberty-runtime', version: '[24.0.0.8-beta,)'
}
----
// // // // // // // //
// In the preceding section:
// Replace the Maven `3.8.2` with the latest version of the plugin: https://search.maven.org/artifact/io.openliberty.tools/liberty-maven-plugin
// Replace the Gradle `3.6.2` with the latest version of the plugin: https://search.maven.org/artifact/io.openliberty.tools/liberty-gradle-plugin
// TODO: Update GHA to automatically do the above.  If the maven.org is problematic, then could fallback to using the GH Releases for the plugins
// // // // // // // //

Or if you're using link:{url-prefix}/docs/latest/container-images.html[container images]:

[source]
----
FROM icr.io/appcafe/open-liberty:beta
----

Or take a look at our link:{url-prefix}/downloads/#runtime_betas[Downloads page].

If you're using link:https://plugins.jetbrains.com/plugin/14856-liberty-tools[IntelliJ IDEA], link:https://marketplace.visualstudio.com/items?itemName=Open-Liberty.liberty-dev-vscode-ext[Visual Studio Code] or link:https://marketplace.eclipse.org/content/liberty-tools[Eclipse IDE], you can also take advantage of our open source link:https://openliberty.io/docs/latest/develop-liberty-tools.html[Liberty developer tools] to enable effective development, testing, debugging and application management all from within your IDE.

For more information on using a beta release, refer to the link:{url-prefix}docs/latest/installing-open-liberty-betas.html[Installing Open Liberty beta releases] documentation.

[#feedback]
== We welcome your feedback

Let us know what you think on link:https://groups.io/g/openliberty[our mailing list]. If you hit a problem, link:https://stackoverflow.com/questions/tagged/open-liberty[post a question on StackOverflow]. If you hit a bug, link:https://github.com/OpenLiberty/open-liberty/issues[please raise an issue].
