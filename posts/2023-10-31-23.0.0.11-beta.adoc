---
layout: post
title: "New vendor metrics available in Open Liberty 23.0.0.11-beta"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/lauracowen
author_github: https://github.com/lauracowen
seo-title: New vendor metrics available in Open Liberty 23.0.0.11-beta - OpenLiberty.io
seo-description: With MicroProfile Metrics 5.0, you can now add to your dashboard metrics, such as "REST Elapsed Time per Request", without needing to calculate them yourself.
blog_description: With MicroProfile Metrics 5.0, you can now add to your dashboard metrics, such as "REST Elapsed Time per Request", without needing to calculate them yourself.
open-graph-image: https://openliberty.io/img/twitter_card.jpg
open-graph-image-alt: Open Liberty Logo
---
= New vendor metrics available in Open Liberty 23.0.0.11-beta
Laura Cowen <https://github.com/lauracowen>
:imagesdir: /
//Blank line here is necessary before starting the body of the post.

The link:/[Open Liberty] 23.0.0.11-beta contains some <<mpmetrics, new vendor metrics for MicroProfile Metrics 5.0>> (along with link:/docs/latest/reference/feature/feature-overview.html[all GA features]). You can now add to your dashboard metrics, such as "REST Elapsed Time per Request", without needing to calculate them yourself.

See also link:{url-prefix}/blog/?search=beta&key=tag[previous Open Liberty beta blog posts].

// // // // DO NOT MODIFY THIS COMMENT BLOCK <GHA-BLOG-TOPIC> // // // // 
// Blog issue: https://github.com/OpenLiberty/open-liberty/issues/26406
// Contact/Reviewer: pgunapal
// // // // // // // // 
[#mpmetrics]
== New vendor metrics for MicroProfile Metrics 5.0

This update to MicroProfile Metrics 5.0 (`mpMetrics-5.0`) on Open Liberty includes some new link:/docs/latest/metrics-list.html#_base_and_vendor_metrics[vendor metrics] at the `/metrics` endpoint.  

Previously, you could calculate the new metrics for yourself from the Time and Total counts that were already provided for various monitoring components. For example, to obtain a "response time per request" metric, you would calculate it using the array of time series data provided by the MicroProfile Metrics feature. However, not all monitoring tools support such complex time series expressions.

You can use the new metrics directly in dashboards, without additional computation, with various different monitoring tools, when using the MicroProfile Metrics 5.0 feature.

The following table lists the new vendor metrics:

[cols="1,1"]
|===
|Metric | Endpoint output (Prometheus format)

|Process CPU Utilization Percent
|`# HELP cpu_processCpuUtilization_percent The recent CPU time that is used by the JVM process from all processors that are available to the JVM. The value is between 0 and 1. +
# TYPE cpu_processCpuUtilization_percent gauge 
cpu_processCpuUtilization_percent{mp_scope="vendor",} 0.03710604254625131`

|Heap Utilization Percent
|`# HELP memory_heapUtilization_percent The portion of the maximum heap memory that is currently in use. This metric displays -1 if the maximum heap memory size is unknown. The value is between 0 and 1.+
# TYPE memory_heapUtilization_percent gauge 
memory_heapUtilization_percent{mp_scope="vendor",} 0.007193807512521744`

|GC Time per Cycle
|`# HELP gc_time_per_cycle_seconds The recent average time spent per garbage collection cycle. This metric displays -1 if the garbage collection elapsed time or count is unknown for this collector. +
# TYPE gc_time_per_cycle_seconds gauge
gc_time_per_cycle_seconds{mp_scope="vendor",name="global",} 0.005`

|Connection Pool in Use Time per Used Connection
|`# HELP connectionpool_inUseTime_per_usedConnection_seconds The recent average time that connections are in use. +
# TYPE connectionpool_inUseTime_per_usedConnection_seconds gauge connectionpool_inUseTime_per_usedConnection_seconds{datasource="jdbc_exampleDS1",mp_scope="vendor",} 0.497`

|Connection Pool Wait Time per Queued Request
|`# HELP connectionpool_waitTime_per_queuedRequest_seconds The recent average wait time for queued connection requests. +
# TYPE connectionpool_waitTime_per_queuedRequest_seconds gauge connectionpool_waitTime_per_queuedRequest_seconds{datasource="jdbc_exampleDS1",mp_scope="vendor",} 35.0`

|Servlet Elapsed Time per Request
|`# HELP servlet_request_elapsedTime_per_request_seconds The recent average elapsed response time per servlet request. +
# TYPE servlet_request_elapsedTime_per_request_seconds gauge servlet_request_elapsedTime_per_request_seconds{mp_scope="vendor",servlet=”myapp_servletA",} 0.001256676333333333
servlet_request_elapsedTime_per_request_seconds{mp_scope="vendor",servlet=" myapp_servletB",} 0.00372855566666666
servlet_request_elapsedTime_per_request_seconds{mp_scope="vendor",servlet=" myapp_servletC",} 1.731813674`

|REST Elapsed Time per Request
|`# HELP REST_request_elapsedTime_per_request_seconds The recent average elapsed response time per RESTful resource method request. +
# TYPE REST_request_elapsedTime_per_request_seconds gauge REST_request_elapsedTime_per_request_seconds{class=”my.package.MyClass",method=”simpleGet",mp_scope=”vendor"} 0.0061460695`

|===


The Heap Utilization and CPU Utilization metrics are available when the server is started. The ConnectionPool, REST, and Servlet metrics are available if the application contains any of the relevant data sources, REST APIs, or servlets, as is the case with the existing vendor metrics.

The new vendor metrics are available in the `/metrics` output, by enabling the following Microprofile Metrics 5.0 feature in your `server.xml`:

[source, xml]
----
<featureManager>
   <feature>mpMetrics-5.0</feature>
</featureManager>   
----

For more information, see:

* link:/docs/latest/introduction-monitoring-metrics.html[Microservice observability with metrics]
* link:/docs/latest/reference/feature/mpMetrics-5.0.html[MicroProfile Metrics 5.0 feature]
* link:/docs/latest/metrics-list.html[Metrics reference list]
    

// DO NOT MODIFY THIS LINE. </GHA-BLOG-TOPIC> 


[#run]
=== Try it now 

To try out these features, update your build tools to pull the Open Liberty All Beta Features package instead of the main release. The beta works with Java SE XX, Java SE 17, Java SE 11, and Java SE 8.
// // // // // // // //
// In the preceding section:
// Check if a new non-LTS Java SE version is supported that needs to be added to the list (17, 11, and 8 are LTS and will remain for a while)
// https://openliberty.io/docs/latest/java-se.html
// // // // // // // //

If you're using link:/guides/maven-intro.html[Maven], you can install the All Beta Features package using:

[source,xml]
----
<plugin>
    <groupId>io.openliberty.tools</groupId>
    <artifactId>liberty-maven-plugin</artifactId>
    <version>3.9</version>
    <configuration>
        <runtimeArtifact>
          <groupId>io.openliberty.beta</groupId>
          <artifactId>openliberty-runtime</artifactId>
          <version>23.0.0.11-beta</version>
          <type>zip</type>
        </runtimeArtifact>
    </configuration>
</plugin>
----

You must also add dependencies to your pom.xml file for the beta version of the APIs that are associated with the beta features that you want to try.  For example, for Jakarta EE 10 and MicroProfile 6, you would include:
[source,xml]
----
<dependency>
    <groupId>org.eclipse.microprofile</groupId>
    <artifactId>microprofile</artifactId>
    <version>6.0-RC3</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>jakarta.platform</groupId>
    <artifactId>jakarta.jakartaee-api</artifactId>
    <version>10.0.0</version>
    <scope>provided</scope>
</dependency>
----

Or for link:/guides/gradle-intro.html[Gradle]:

[source,gradle]
----
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'io.openliberty.tools:liberty-gradle-plugin:3.7'
    }
}
apply plugin: 'liberty'
dependencies {
    libertyRuntime group: 'io.openliberty.beta', name: 'openliberty-runtime', version: '[23.0.0.11-beta,)'
}
----

Or if you're using link:/docs/latest/container-images.html[container images]:

[source]
----
FROM icr.io/appcafe/open-liberty:beta
----

Or take a look at our link:/downloads/#runtime_betas[Downloads page].

If you're using link:https://plugins.jetbrains.com/plugin/14856-liberty-tools[IntelliJ IDEA], link:https://marketplace.visualstudio.com/items?itemName=Open-Liberty.liberty-dev-vscode-ext[Visual Studio Code], or link:https://marketplace.eclipse.org/content/liberty-tools[Eclipse IDE], try our open source link:https://openliberty.io/docs/latest/develop-liberty-tools.html[Liberty developer tools] for efficient development, testing, debugging, and application management, all within your IDE. 

For more information on using a beta release, refer to the link:/docs/latest/installing-open-liberty-betas.html[Installing Open Liberty beta releases] documentation.

[#feedback]
== We welcome your feedback

Let us know what you think on link:https://groups.io/g/openliberty[our mailing list]. If you hit a problem, link:https://stackoverflow.com/questions/tagged/open-liberty[post a question on StackOverflow]. If you hit a bug, link:https://github.com/OpenLiberty/open-liberty/issues[please raise an issue].


